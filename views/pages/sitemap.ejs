<!DOCTYPE html>
<html lang="en">
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Sitemap | Bambuddy</title>

      <!-- Bootstrap CSS -->
      <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
        crossorigin="anonymous"
      />
      <!-- Bootstrap Icon -->
      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
      />

      <!-- Google Font -->
      <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap"
      />

      <!-- CSS Global Variable -->
      <link rel="stylesheet" href="/css/style.css" />
      <link rel="stylesheet" href="/css/sitemap.css" />

      <script src="/js/theme-loader.js"></script>
    </head>
    <body class="<%= (user && user.theme) || 'light' %>">
      <%- include('../partials/navbar') %>

      <div class="sitemap-header">
        <div class="container">
          <div class="row align-items-center my-4">
            <div class="col-md-9 px-md-4">
              <h1 class="mb-md-3 mb-0 text-center text-md-start mt-3 mt-md-0">
                BamBuddy Sitemap
              </h1>
            </div>
            <div class="col-md-3 text-md-end">
              <div class="sitemap-stats rounded align-items-center m-4">
                <h4 class="mb-1"><%= totalRoutes %></h4>
                <small>Total Pages</small>
                <div class="mt-2">
                  <div><%= totalStaticRoutes %> Static</div>
                  <div><%= totalDynamicRoutes %> Dynamic</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="row mb-3">
          <div class="col-12">
            <div class="sitemap-stats">
              <div class="row text-center">
                <div class="col-lg-2 col-md-4 col-6 mb-3">
                  <h6>Main</h6>
                  <p class="mb-0 small">Essential pages</p>
                </div>
                <div class="col-lg-2 col-md-4 col-6 mb-3">
                  <h6>Tours</h6>
                  <p class="mb-0 small">Travel experiences</p>
                </div>
                <div class="col-lg-2 col-md-4 col-6 mb-3">
                  <h6>Community</h6>
                  <p class="mb-0 small">Forum & discussions</p>
                </div>
                <div class="col-lg-2 col-md-4 col-6 mb-3">
                  <h6>User Panel</h6>
                  <p class="mb-0 small">Profile & trips</p>
                </div>
                <div class="col-lg-2 col-md-4 col-6 mb-3">
                  <h6>Guide Panel</h6>
                  <p class="mb-0 small">Tour management</p>
                </div>
                <div class="col-lg-2 col-md-4 col-6 mb-3">
                  <h6>Admin</h6>
                  <p class="mb-0 small">Administration</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Static Routes Section -->
        <div class="row mb-4">
          <div class="col-12">
            <h2 class="section-title">Static Routes</h2>
            <p class="text-muted">Core application pages and functionality</p>
          </div>
        </div>
        <div class="row">
          <% Object.keys(staticRoutes).forEach(category => { %>
          <div class="col-lg-6 mb-4">
            <div class="sitemap-category">
              <div class="category-header">
                <%= category %> (<%= staticRoutes[category].length %> pages)
              </div>
              <div class="sitemap-links">
                <% staticRoutes[category].forEach(route => { %>
                <a href="<%= route.url %>" class="sitemap-link">
                  <%= route.title %> <% if (route.requiresAuth) { %> <% } %> <%
                  if (route.role) { %>
                  <small class="text-muted ms-2">(<%= route.role %>)</small>
                  <% } %>
                </a>
                <% }) %>
              </div>
            </div>
          </div>
          <% }) %>
        </div>

        <!-- Dynamic Routes Section -->
        <% if (Object.keys(dynamicRoutes).length > 0) { %>
        <div class="row mb-4 mt-5">
          <div class="col-12">
            <h2 class="section-title">Dynamic Routes</h2>
            <p class="text-muted">User-generated content and public profiles</p>
          </div>
        </div>
        <div class="row">
          <% Object.keys(dynamicRoutes).forEach(category => { %>
          <div class="col-lg-6 mb-4">
            <div class="sitemap-category">
              <div class="category-header">
                <%= category %> (<%= dynamicRoutes[category].length %> pages)
              </div>
              <div class="sitemap-links">
                <% dynamicRoutes[category].forEach(route => { %>
                <a href="<%= route.url %>" class="sitemap-link">
                  <%= route.title %>
                </a>
                <% }) %>
              </div>
            </div>
          </div>
          <% }) %>
        </div>
        <% } %>
      </div>
      <%- include('../partials/footer') %>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    </body>
  </html>
</html>
